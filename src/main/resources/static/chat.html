<!--<!DOCTYPE html>
<html>
	<head>
		<titlt>Real-time chat</titlt>
		<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.5.1/dist/sockjs.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
	</head>
	
	<body>
		<h1>Chat Application</h1>
		<div id="chatBox" style="border: 1px solid #000; height: 300px; overflow-y:scroll;"></div>
		<input type="text" id="sender" placeholder="Your name"/>
		<input type="text" id="message" placeholder="Type a message"/>
		<button onClick="sendMessage()">Send</button>
		
		<script>
			
			 let stompClient;
			 
			 //connect to websocket
			 function connect(){
				 const socket = new SockJS('/chat');
				 stompClient = Stomp.over(socket);
				 stompClient.connect({}, function(frame){
					 console.log("connected" , + frame);
					 stompClient.subscribe("/topic/messages", function(message){
						showMessage(JSON.parse(message.body));
					 });
					 
				 });
			 }
			 
			 //send message
			 function sendMessage(){
				 console.log("sendmessage");
				 const sender = document.getElementById('sender').value;
				 const content = document.getElementById('message').value;
				 stompClient.send("/app/sendMessage", {}, JSON.stringify({sender,content}));
			 }
			 
			 //display message
			 function showMessage(message){
				  console.log("sendmessage");
				 const chatBox = document.getElementById('chatBox');
				  const timestamp = new Date(message.timestamp); 
				  
				 
    if (isNaN(timestamp)) {
        console.error("Invalid Date:", message.timestamp);  // Log invalid timestamp
        return;  // Exit if the timestamp is invalid
    }

				  
				  
				  
                  const formattedTime = timestamp.toLocaleTimeString();
				 const msg =`<p><Strong>${message.sender}:</strong> ${message.content} <i>(${formattedTime})</i></p>`;
			     chatBox.innerHTML +=msg;
			
			 }		
			connect();
		</script>
	</body>
</html>-->